
# API для подтверждения email-адреса

Для получения кода подтверждения, отправляется запрос на точку **/send-code**. В случае успешной обработки запроса, пользователю приходит код подтверждения.
Полученный пользователем, код подтверждения отправляются на точку **/check-code**.

## Отправка кода подтверждения
`POST` **/send-code**
* **email** – адрес эл. почты

На указанный email, отправляется код подтверждения, состоящий из 4-х цифровых символов.

Код отмечается как недействительный если:
* прошло более 5 минут с момента генерации кода
* был запрошен новый код на тот же email

### Ограничения
Для одного email-адреса код может отправляться не чаще чем:
* 1 раз в 5 минут
* 5 раз в час

### Пример запроса
```json
{
    "email": "dave@example.org"
}
```
### Ответ в случае успешной отправки кода подтверждения
```json
{
    "status": "success"
}
```
### Пример ответа в случае ошибки
```json
{
    "status": "error",
    "message": "Request limit exceeded"
}
```


## Проверка кода подтверждения
`POST` **/check-code**
* **email** – адрес эл. почты
* **code** – код подтверждения

Проверяется соответствие кода в запросе с актуальным для этого email'а кодом подтверждения.

Если код в запросе совпадает с актуальным, ранее отправленным кодом:
* пользователь отмечается в системе как подтвердивший свой email
* код отмечается как успешно использованный и больше не может быть использован повторно
* сбрасываются счётчики кол-ва запросов кода подтверждения

Если код в запросе не совпадает с актуальным кодом, то увеличивается счётчик кол-ва попыток подтвердить email этим кодом.
После **3-ей** неуспешной попытки подтвердить email этим кодом, код отмечается как недействительный и больше не может быть использован.

### Пример запроса
```json
{
    "email": "dave@example.org",
    "code": "0379"
}
```
### Ответ в случае успешной отправки кода подтверждения
```json
{
    "status": "success"
}
```
### Ответ в случае, если не подошёл код подтверждения
```json
{
    "status": "error",
    "message": "Wrong verification code"
}
```
